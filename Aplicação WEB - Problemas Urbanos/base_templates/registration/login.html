{% extends 'base.html' %}
{% load static %}

{% block title %}Login - Mapeamento Problemas Urbanos{% endblock %}

{% block page_specific_css %}
    <style>
        /* Estilos que eu forneci anteriormente para login.html */
        .auth-container { /* Renomeei para ser consistente com signup.html */
            max-width: 450px; /* Aumentei um pouco */
            margin: 50px auto;
            padding: 30px; /* Aumentei padding */
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .auth-container h2 {
            text-align: center;
            margin-bottom: 25px;
            color: var(--primary-color, #0056b3);
        }
        .auth-container form p { /* Estilo para os parágrafos gerados por {{ form.as_p }} */
            margin-bottom: 15px;
        }
        .auth-container form p label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .auth-container form p input[type="text"],
        .auth-container form p input[type="password"] {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color, #ccc);
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        .auth-container form p input:focus {
            border-color: var(--primary-color, #0056b3);
            box-shadow: 0 0 0 2px rgba(0, 86, 179, 0.15);
            outline: none;
        }
        .auth-container button[type="submit"] { /* Estilo para o botão de submit */
            display: block;
            width: 100%;
            padding: 10px 15px;
            background-color: var(--light-blue, #007bff); /* Use var(--light-blue) se definido no seu CSS base */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 500;
        }
        .auth-container .errorlist { /* Estilo para erros do formulário */
            color: var(--danger-color, #dc3545);
            list-style-type: none;
            padding: 8px 10px;
            margin: 0 0 15px 0;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            font-size: 0.9em;
        }
         .auth-links { /* Estilos para os links de "Criar conta" etc. */
            text-align: center;
            margin-top: 20px;
            font-size: 0.9em;
        }
        .auth-links a {
            color: var(--primary-color, #0056b3);
            text-decoration: none;
        }
        .auth-links a:hover {
            text-decoration: underline;
        }
    </style>
{% endblock %}

{# Removendo blocos desnecessários para a página de login #}
{% block sidebar %}{% endblock %}
{% block full_width_content_before_main %}{% endblock %}
{% block modals %}{% endblock %}
{% block confirmation_messages %}{% endblock %}

{% block content %}
<div class="auth-container">
    <h2>Login</h2>

    {# Exibe erros de formulário não ligados a um campo específico (ex: "Usuário ou senha inválidos") #}
    {% if form.non_field_errors %}
        <ul class="errorlist">
            {% for error in form.non_field_errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% elif form.errors and request.method == 'POST' %} 
        {# Mensagem genérica se houve uma tentativa de POST e outros erros (geralmente não acontece com non_field_errors) #}
        <p class="errorlist">Por favor, insira um nome de usuário e senha corretos. Note que ambos os campos podem ser sensíveis a maiúsculas.</p>
    {% endif %}
    
    <form method="post" action="{% url 'login' %}">
        {% csrf_token %}
        {{ form.as_p }} {# Renderiza os campos username e password como parágrafos <p> #}
        <button type="submit">Entrar</button>
        {# O 'next' é importante para redirecionar após o login para a página que o usuário tentava acessar #}
    <input type="hidden" name="next" value="{{ next | default_if_none:'' }}">
    </form>

    <div class="auth-links">
        <p>Não tem uma conta? <a href="{% url 'mapa_app:signup' %}">Crie uma aqui</a>.</p>
        {# Você pode adicionar um link para reset de senha aqui no futuro #}
        {# <p><a href="{% url 'password_reset' %}">Esqueceu a senha?</a></p> #}
    </div>
</div>
{% endblock %}

{% block page_specific_scripts %}{% endblock %}