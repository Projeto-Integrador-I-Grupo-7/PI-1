{% extends 'global/base.html' %} 
{% load static %}

{% block title %}Login - Mapeamento Problemas Urbanos{% endblock %}

{% block page_specific_css %}
    <style>
        .auth-container {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); /* Sombra mais suave */
            padding: 25px; /* Padding base */
            margin: 30px auto; /* Margem base para telas maiores */
            max-width: 420px; /* Largura máxima para desktop */
            width: 90%; /* Para telas menores, ocupa 90% com margens laterais */
            
            /* Para o caso de rolagem interna, se necessário (já discutimos isso) */
            /* max-height: calc(100% - 40px); */ /* Ocupa altura do pai .main-content menos padding do .main-content */
            /* overflow-y: auto; */
            display: flex;
            flex-direction: column;
        }

        .auth-container h2 {
            text-align: center;
            margin-bottom: 20px; /* Reduzido */
            color: var(--primary-color, #0056b3);
            font-size: 1.8rem; /* Tamanho base do título */
        }

        .auth-container form p {
            margin-bottom: 1rem; /* Usando rem para consistência */
        }

        .auth-container form p label {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 500;
            font-size: 0.9rem; /* Levemente menor */
        }

        .auth-container form p input[type="text"],
        .auth-container form p input[type="password"] {
            width: 100%;
            padding: 0.75rem 0.85rem; /* Ajustado padding dos inputs */
            border: 1px solid var(--border-color-medium, #ced4da); /* Usando variável CSS se disponível */
            border-radius: var(--border-radius-medium, 0.375rem);
            box-sizing: border-box;
            font-size: 1rem;
        }

        .auth-container form p input:focus {
            border-color: var(--primary-color, #0056b3);
            box-shadow: 0 0 0 0.2rem rgba(var(--primary-color-rgb, 0, 86, 179), 0.25); /* Usando variáveis */
            outline: none;
        }

        .auth-container button[type="submit"] {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem; /* Ajustado padding */
            background-color: var(--light-blue, #007bff);
            color: white;
            border: none;
            border-radius: var(--border-radius-medium, 0.375rem);
            cursor: pointer;
            font-size: 1rem; /* Ajustado */
            font-weight: 500;
            transition: background-color 0.2s ease;
        }
        .auth-container button[type="submit"]:hover {
            background-color: var(--primary-color-dark, #004488); /* Cor mais escura no hover */
        }

        .auth-container .errorlist {
            color: var(--danger-color, #dc3545);
            background-color: rgba(var(--danger-color-rgb, 220, 53, 69), 0.1); /* Fundo mais suave */
            border: 1px solid rgba(var(--danger-color-rgb, 220, 53, 69), 0.3); /* Borda mais suave */
            list-style-type: none;
            padding: 0.75rem 1rem;
            margin: 0 0 1rem 0;
            border-radius: var(--border-radius-medium, 0.375rem);
            font-size: 0.9rem;
        }
        .auth-container .errorlist li + li { /* Espaço entre itens da lista de erro */
            margin-top: 0.25rem;
        }

        .auth-links {
            text-align: center;
            margin-top: 1.25rem; /* 20px */
            font-size: 0.9rem;
        }
        .auth-links a {
            color: var(--primary-color, #0056b3);
            text-decoration: none;
            font-weight: 500; /* Destaca um pouco o link */
        }
        .auth-links a:hover {
            text-decoration: underline;
        }

        /* === Media Queries para Responsividade === */

        /* Telas Médias (Tablets) */
        @media (max-width: 768px) {
            .auth-container {
                margin: 20px auto; /* Margem vertical menor */
                padding: 20px;    /* Padding interno menor */
                max-width: 90%;   /* Ocupa mais da largura da tela */
            }
            .auth-container h2 {
                font-size: 1.6rem;
                margin-bottom: 15px;
            }
            .auth-container form p input[type="text"],
            .auth-container form p input[type="password"],
            .auth-container button[type="submit"] {
                font-size: 0.95rem; /* Fontes um pouco menores */
                padding: 0.65rem 0.75rem;
            }
        }

        /* Telas Pequenas (Celulares) */
        @media (max-width: 480px) {
            .auth-container {
                margin: 15px auto;
                padding: 15px;
                /* max-width: 95%; /* Ainda mais próximo das bordas */
                   /* width: 100% já cobre isso se o pai .main-content tiver padding */
            }
            .auth-container h2 {
                font-size: 1.4rem;
            }
             .auth-container form p label {
                font-size: 0.85rem;
            }
            .auth-container form p input[type="text"],
            .auth-container form p input[type="password"],
            .auth-container button[type="submit"] {
                font-size: 0.9rem;
            }
            .auth-links {
                font-size: 0.85rem;
            }
        }
    </style>
{% endblock %}

{# Removendo blocos desnecessários para a página de login #}
{% block sidebar %}{% endblock %}
{% block full_width_content_before_main %}{% endblock %}
{% block modals %}{% endblock %}
{% block confirmation_messages %}{% endblock %}

{% block content %}
<div class="auth-container">
    <h2>Login</h2>

    {% if form.non_field_errors %}
        <ul class="errorlist">
            {% for error in form.non_field_errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% elif form.errors and request.method == 'POST' and not form.non_field_errors %} 
        <ul class="errorlist">
            <li>Por favor, verifique os dados inseridos.</li>
        </ul>
    {% endif %}
    
    <form method="post" action="{% url 'login' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Entrar</button>
        <input type="hidden" name="next" value="{{ next | default_if_none:'' }}">
    </form>

    <div class="auth-links">
        <p>Não tem uma conta? <a href="{% url 'mapa_app:signup' %}">Crie uma aqui</a>.</p>
    </div>
</div>
{% endblock %}

{% block page_specific_scripts %}{% endblock %}